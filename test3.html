<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WIGO-혼자서 갈수있는 장소!</title>
  <link rel="stylesheet" href="headerStyle.css" />
  <link rel="stylesheet" href="starRating.css" />
  <style>
    section {
      padding-top: 150px;
    }
  </style>
  <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>

  <script>
    var district = localStorage.getItem("district");
    $(document).ready(function() {
      var $star = $(".star-input"),
        $result = $star.find("output>b");

      $(document)
        .on("focusin", ".star-input>.input",
          function() {
            $(this).addClass("focus");
          })
        .on("focusout", ".star-input>.input", function() {
          var $this = $(this);
          setTimeout(function() {
            if ($this.find(":focus").length === 0) {
              $this.removeClass("focus");
            }
          }, 100);
        })
        .on("change", ".star-input :radio", function() {
          $result.text($(this).next().text());
        })
        .on("mouseover", ".star-input label", function() {
          $result.text($(this).text());
        })
        .on("mouseleave", ".star-input>.input", function() {
          var $checked = $star.find(":checked");
          if ($checked.length === 0) {
            $result.text("0");
          } else {
            $result.text($checked.next().text());
          }
        });
    });
    // window.onload = function starRating(){
    //   var $star = $(".star-input"),
    //     $result = $star.find("output>b");
    //
    //   $(document)
    //     .on("focusin", ".star-input>.input",
    //       function() {
    //         $(this).addClass("focus");
    //       })
    //     .on("focusout", ".star-input>.input", function() {
    //       var $this = $(this);
    //       setTimeout(function() {
    //         if ($this.find(":focus").length === 0) {
    //           $this.removeClass("focus");
    //         }
    //       }, 100);
    //     })
    //     .on("change", ".star-input :radio", function() {
    //       $result.text($(this).next().text());
    //     })
    //     .on("mouseover", ".star-input label", function() {
    //       $result.text($(this).text());
    //     })
    //     .on("mouseleave", ".star-input>.input", function() {
    //       var $checked = $star.find(":checked");
    //       if ($checked.length === 0) {
    //         $result.text("0");
    //       } else {
    //         $result.text($checked.next().text());
    //       }
    //     });
    // };
  </script>
  <script>
    var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;

    // Open (or create) the database
    var open = indexedDB.open("MyDatabase", 1);

    // Create the schema
    open.onupgradeneeded = function() {
      var db = open.result;
      var store = db.createObjectStore("MyObjectStore", {
        keyPath: "id"
      });
      var index = store.createIndex("NameIndex", ["name.last", "name.first"]);
    };

    open.onsuccess = function() {
      // Start a new transaction
      var db = open.result;
      var tx = db.transaction("MyObjectStore", "readwrite");
      var store = tx.objectStore("MyObjectStore");
      var index = store.index("NameIndex");

      // Add some data
      store.put({
        id: 12345,
        name: {
          first: "John",
          last: "Doe"
        },
        age: 42
      });
      store.put({
        id: 67890,
        name: {
          first: "Bob",
          last: "Smith"
        },
        age: 35
      });

      // Query the data
      var getJohn = store.get(12345);
      var getBob = index.get(["Smith", "Bob"]);

      getJohn.onsuccess = function() {
        console.log(getJohn.result.name.first); // => "John"
      };

      getBob.onsuccess = function() {
        console.log(getBob.result.name.first); // => "Bob"
      };

      // Close the db when the transaction is done
      tx.oncomplete = function() {
        db.close();
      };
    }
  </script>
</head>

<body>
  <!-- 1. 헤더 -->
  <header id="header">
    <form class="inputForm">
      <input type="text" value="아이디" />
      <input type="password" />
      <input type="submit" value="로그인" />
    </form>
    <a href="main.html"><img src="logo_wigo.png"  class="firstImage"/></a>
    <img src="logo_whereigo.png" class="secondImage" />
  </header>
  <!-- 3. 세션 -->
  <section class="section">
    <span class="star-input">
  	<span class="input">
      	<input type="radio" name="star-input" value="1" id="p1">
      	<label for="p1">1</label>
      	<input type="radio" name="star-input" value="2" id="p2">
      	<label for="p2">2</label>
      	<input type="radio" name="star-input" value="3" id="p3">
      	<label for="p3">3</label>
      	<input type="radio" name="star-input" value="4" id="p4">
      	<label for="p4">4</label>
      	<input type="radio" name="star-input" value="5" id="p5">
      	<label for="p5">5</label>
    	</span>
    <output for="star-input"><b>0</b>점</output>
    </span>
    <input type="button" value="별점 주기" />
    <br>
    <hr/>
    <br>
    <!-- 라이브리 시티 설치 코드 -->
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNjg2Mi8xMzM5OA==">
      <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
      <script>
        // Initialize Firebase
        var config = {
          apiKey: "AIzaSyDb7Y0vXrXNvL3Y97gxG0yefK3QScRq1QU",
          authDomain: "wigotest-231d2.firebaseapp.com",
          databaseURL: "https://wigotest-231d2.firebaseio.com",
          projectId: "wigotest-231d2",
          storageBucket: "wigotest-231d2.appspot.com",
          messagingSenderId: "352491168261"
        };
        firebase.initializeApp(config);
        var provider = new firebase.auth.GoogleAuthProvider();

        // 인증하기
        firebase.auth().signInWithPopup(provider).then(function(result) {
          // This gives you a Google Access Token. You can use it to access the Google API.
          var token = result.credential.accessToken;
          // The signed-in user info.
          var user = result.user;

          console.log(user) // 인증 후 어떤 데이터를 받아오는지 확인해보기 위함.
          // ...
        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...
        });
      </script>
      <script type="text/javascript">
        (function(d, s) {
          var j, e = d.getElementsByTagName(s)[0];

          if (typeof LivereTower === 'function') {
            return;
          }

          j = d.createElement(s);
          j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
          j.async = true;

          e.parentNode.insertBefore(j, e);
        })(document, 'script');
      </script>
      <noscript> 라이브리 댓글 작성을 위해 JavaScript를 활성화 해주세요</noscript>
    </div>
    <!-- 시티 설치 코드 끝 -->

  </section>
  <!-- 4. 바닥글 -->
  <footer>
  </footer>
</body>

</html>
